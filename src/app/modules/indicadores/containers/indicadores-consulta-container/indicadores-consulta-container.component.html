<section>
    <div class="p-shadow-1" style="margin: 4rem; padding: 1.5rem 0 1.5rem 01.5rem;">
        <h1 style="width: 60%; margin: 10px 10px 0 10px;">Pesquisar indicadores</h1>
        <div [formGroup]='consultaForm' class="p-fluid p-formgrid p-grid" style="width: 60%; margin: 10px 10px 0 10px;">
            <div class="p-field p-col">
                <p-autoComplete field="label" formControlName="curso" [suggestions]="cursos"
                    emptyMessage="Capacitação não encontrado" (completeMethod)="searchCursos($event)" [dropdown]="true"
                    [minLength]="3" [placeholder]="'Selecione uma capacitação'">
                    <ng-template let-curso pTemplate="item">
                        <div class="dropdown-item-container">
                            <span style="font-weight: bolder; font-size: 1.2rem">{{curso.label}}</span>
                            <br>
                            <span style="font-size: 1.0rem;">{{curso.title}}</span>
                        </div>
                    </ng-template>
                </p-autoComplete>
            </div>
            <div class="p-field p-col">
                <p-autoComplete field="label" formControlName="org" [suggestions]="organizacoes"
                    emptyMessage="Organização não encontrada" (completeMethod)="searchOrgs($event)"
                    [dropdown]="true" [minLength]="3" [placeholder]="'Selecione uma organização'">
                    <ng-template let-curso pTemplate="item">
                        <div class="dropdown-item-container">
                            <span style="font-weight: bolder; font-size: 1.2rem;">{{curso.label}}</span>
                            <br>
                            <span style="font-size: 1.0rem;">{{curso.title}}</span>
                        </div>
                    </ng-template>
                </p-autoComplete>
            </div>
        </div>
        <div class="p-fluid p-formgrid p-grid" style="width: 60%; margin: 0 10px 20px 20px;">
            <div class="p-formgroup-inline">
                <div class="p-field-checkbox">
                    <p-checkbox [(ngModel)]="incluirSubordinadas" [binary]="true"></p-checkbox>
                    <label for="incluirSubordinadas">incluir subordinadas</label>
                </div>
            </div>
            <div class="p-field p-col-2">
                <button pButton pRipple type="button" label="Pesquisar" class="p-button-raised"
                    (click)="buscarIndicadores()"></button>
            </div>

            <div class="p-field p-col-2">
                <button pButton pRipple type="button" label="Limpar" class="p-button-raised"
                    (click)="resetForms()"></button>
            </div>
        </div>

        <h2 *ngIf="showTableOmIndicadores || indicadoresAgrupados.length" class="headline">Resultado da pesquisa</h2>
        <div *ngIf="indicadoresAgrupados.length">
            <div *ngFor="let ind of indicadoresAgrupados" style="margin: 1rem; border: dashed 1px #bbb;">
                <app-table-indicadores-curso [indicadores]="ind.indicadores"> </app-table-indicadores-curso>
            </div>
        </div>
        <div *ngIf="showTableOmIndicadores" style="margin: 1rem; border: dashed 1px #bbb;">
            <app-table-indicadores-om [indicadores]="indicadores"> </app-table-indicadores-om>
        </div>
    </div>
</section>